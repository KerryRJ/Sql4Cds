<?xml version="1.0" encoding="utf-8"?>
<package xmlns="http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd">
  <metadata>
    <id>MarkMpn.Sql4Cds.Engine</id>
    <version>3.0.0</version>
    <title>SQL 4 CDS Engine</title>
    <authors>Mark Carrington</authors>
    <owners></owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <projectUrl>https://markcarrington.dev/sql-4-cds/</projectUrl>
    <iconUrl>https://markcarrington.dev/sql4cds-icon/</iconUrl>
    <description>Convert SQL queries to FetchXml and execute them against Dataverse / D365</description>
    <summary>Convert SQL queries to FetchXml and execute them against Dataverse / D365</summary>
    <releaseNotes>Added Common Table Expression support:
- Non-recursive CTEs are expanded to subqueries for compatibility with TDS Endpoint
- Recurve CTEs are converted to hierarchical FetchXML filters where possible

Extended JSON support:
- OPENJSON table-valued function
- JSON_QUERY function
- ISJSON function

Query optimizer improvements:
- Prefer hash joins over merge joins if sorts cannot be folded
- Switch FetchXML sorts to custom sorting after adding joins that require custom paging
- Avoid folding filters to tables in subqueries if the same alias exists in the outer query
- Do not use a left outer join to implement `NOT IN` queries where the subquery uses an inner join

Added IGNORE_DUP_KEY query hint to ignore duplicate key errors on insert
Added check for multi-currency issues when aggregating non-base currency fields
Clearer progress messages for multi-threaded DML operations

Fixed use of `UNION` with wildcard columns
Fixed error in nested loop joins with no records from inner source
Fixed use of columns from outer queries in join criteria in subqueries
Fixed time zone mismatch when starting bulk delete jobs
Fixed setting polymorphic lookup fields using TDS Endpoint
Fixed aggregates with very dense data distribution
    </releaseNotes>
    <copyright>Copyright © 2020 Mark Carrington</copyright>
    <language>en-GB</language>
    <tags>SQL CDS</tags>
    <dependencies>
      <group targetFramework=".NETFramework4.6.2">
        <dependency id="Microsoft.CrmSdk.CoreAssemblies" version="9.0.2.49" />
        <dependency id="Microsoft.CrmSdk.XrmTooling.CoreAssembly" version="9.1.1.32" />
        <dependency id="Microsoft.SqlServer.TransactSql.ScriptDom" version="161.8834.0" />
        <dependency id="Microsoft.ApplicationInsights" version="2.21.0" />
        <dependency id="XPath2.Extensions" version="1.1.3" />
      </group>
      <group targetFramework=".NETCoreApp6.0">
        <dependency id="Microsoft.PowerPlatform.Dataverse.Client" version="1.1.9" />
        <dependency id="Microsoft.SqlServer.TransactSql.ScriptDom" version="161.8834.0" />
        <dependency id="System.Data.SqlClient" version="4.8.5" />
        <dependency id="Microsoft.ApplicationInsights" version="2.21.0" />
        <dependency id="XPath2.Extensions" version="1.1.3" />
      </group>
    </dependencies>
	<readme>docs\README.md</readme>
  </metadata>
  <files>
    <file src="..\MarkMpn.Sql4Cds.Engine.NetFx\bin\Release\MarkMpn.Sql4Cds.Engine.dll" target="lib\net462\MarkMpn.Sql4Cds.Engine.dll" />
    <file src="..\MarkMpn.Sql4Cds.Engine.NetCore\bin\Release\net6.0\MarkMpn.Sql4Cds.Engine.dll" target="lib\net6.0\MarkMpn.Sql4Cds.Engine.dll" />
	<file src="..\README.md" target="docs\" />
  </files>
</package>